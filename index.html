<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
   <div>
    <button id="mtn" onclick="selectNetwork('MTN')">MTN</button>
    <button id="airtel" onclick="selectNetwork('AIRTEL')">AIRTEL</button>
    <button id="glo" onclick="selectNetwork('GLO')">GLO</button>
    <input type="text" id="AmountInput" placeholder="Amount">
    <button onclick="generateCard()">GENERATE CARD</button>
   </div>
   <div>
    <span id="dispCard"></span>
   </div>
   <div style="display: block;">
    <span id="dispCard2"></span>
    <input type="number" id="generatedCardInput" placeholder="Enter Card Number">
    <button onclick="loadCard()">LOAD</button>
  </div>
  <div>
    <button onclick="clearLocalStorage()">CLEAR SAVED CARDS</button>
  </div>
</body>
<!-- //the script -->





<script>
    let selectedNetwork = ""; 
    
    let AmountInput = document.getElementById("AmountInput");
    let dispCard = document.getElementById("dispCard");
    let generatedCardInput = document.getElementById("generatedCardInput");

    let ar2 = [];






    function selectNetwork(network) {
      selectedNetwork = network;
    }

    function generateCard() {
      if (selectedNetwork && AmountInput.value >= 100) { 
        let cardNumber = Math.floor(Math.random() * 100000000000000000);
        ar2.push({ network: selectedNetwork, amount: AmountInput.value, cardNumber: cardNumber });
        let stringArr = JSON.stringify(ar2);
        dispCard.innerHTML = `The ${AmountInput.value} ${selectedNetwork} card you purchased is "${cardNumber}"`;

        localStorage.setItem("selectedNetwork", stringArr);
      } else {
        dispCard.innerHTML = "Please select a network and enter an amount greater than or equal to 100.";
      }
    }

    function loadCard() {
      const loadedData = localStorage.getItem("selectedNetwork");
      const userInput = generatedCardInput.value;
      let dex = ar2.length -1;

      if (loadedData) {
        const parsedData = JSON.parse(loadedData);
        const found = parsedData.some((item) => item.cardNumber == userInput); 

        if (found) {
          alert(`Successful recharge of ${parsedData[dex].amount} on ${parsedData[dex].network}.`);
        } else {
          alert("The card was not generated by you.");
        }
      } else {
        alert("No card data found in local storage.");
      }
    }
    function clearLocalStorage(){
        localStorage.clear();
    }
</script>
</html>
